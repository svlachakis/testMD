<!--
*   Purpose     :   This page is the detail page of Deployment Result (Custom Object)
*
*   Created Date    :

*   Created By      :   Rohit

*   Version         :   V1.0

*   Modified By     :   Romesh Kumar
Description :-  Made UI changes to look Deployment Result page better.
*
*
-->

<apex:page standardController="PDRI__Deployment_Result__c" tabstyle="PDRI__Deployment_Result__c"
           extensions="PDRI.DeploymentResultExtension,PDRI.TrackDataMigrationStatusExt,PDRI.SurveyController" standardStylesheets="false">

    <script src="/soap/ajax/40.0/connection.js"></script>
    <script src="/soap/ajax/40.0/apex.js" type="text/javascript"></script>
    <script>
    (function(apiKey){
    (function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];
    v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){
        o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);
        y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';
        z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');
        pendo.initialize({
        visitor: {
            id: '{!$User.Email}',
            full_name: '{!$User.FirstName} {!$User.LastName}'
        },

        account: {
            id: '{!$Organization.Id}',
            name: '{!$Organization.Name}'
        }
        });
        })('{!pendoKey}');
    </script>
    <script>
        pendo.track("Legacy-Deployment-Results-Page", {
            visitor: '{!$User.FirstName} {!$User.LastName}',
            account: '{!$Organization.Name}'
                })
    </script>


	<!-- MD-3266: Static resource updated from SLDS080 to SLDS -->
    <apex:stylesheet value="{!URLFOR($Resource.PDRI__SLDS, '/styles/salesforce-lightning-design-system-vf.css')}"/>

    <style>

        .Contentt-wrapper {
        width: 100%;
        float: left;
        overflow: auto;
        }
        .apexp .bPageBlock.apexDefaultPageBlock .pbBody {
        margin: 0px !important;
        }
        .relatedListSec{
        float: left;
        width: 100%;
        margin-top: 20px;
        cursor: pointer; /*MD-2706*/
        }
        .deployResult {
        float: left !important;
        margin-top: .5rem !important;
        margin-right: 5px !important;
        }
        .mainBody-lightning-style {
        paddingLeft: 5%;
        paddingRight: 5%;
        }
        .slds .slds-button-group .slds-button:first-child {
        border-left: 1px solid #ccc !important;
        }

        /*MD-1463*/
        .slds .slds-page-header {
        padding: 10px 24px 12px;
        border-bottom: 1px solid #d8dde6;
        background: #f4f6f9;
        }

        .severtyMsg td:first-child{
        width:26px;
        }

        .slds-scope .slds-nubbin--left-top:after, .slds-scope .slds-nubbin--left-top:before, .slds-scope .slds-nubbin_left-top:after, .slds-scope .slds-nubbin_left-top:before {
        top: 1rem;
        }
        /*MD-1701 Start*/
        .deploymentPlanStep {
        float: left;
        width: 100%;
        margin: 0px;
        border-bottom: 1px solid #ccc;
        cursor:pointer !important;
        /*background: #f7f9fb !important;*/
        }
        .plusMinusImage{
        	width: 3%;
        	float: left;
        	cursor: pointer;
        }
        .deploymentPlanDetail{
        	width: 97%;
        	float: left;
        }
        .vertical_top{
        	width:auto;
        	overflow:hidden"
        }

        /*MD-1766*/
        .vertical_top tr td{ vertical-align:top;}

        .slds-page-header.slds-scope {
		    padding: 10px 24px 12px;
		    border-bottom: 1px solid #d8dde6;
		    background: #f7f9fb;
		}

		.lineHight {
		    line-height: 2.3;
		}
		.borderRemove{
		    border-left: 0px !important;
  			border-right: 0px !important;
		}
		.wordBreak{
			word-break: break-word;
		}

		.slds-scope .slds-table:not(.slds-no-row-hover) tbody tr:hover>td, .slds-scope .slds-table:not(.slds-no-row-hover) tbody tr:hover>th, .slds-scope .slds-table:not(.slds-no-row-hover) tbody tr:focus>td, .slds-scope .slds-table:not(.slds-no-row-hover) tbody tr:focus>th {
		    background-color: #f4f6f9 !important;
		}

		/*MD-2575 - Start*/
		.message {
		    background-color: #ffc;
		    border-style: solid;
		    border-width: 1px;
		    color: #000;
		    padding: 6px 8px 6px 6px;
		    margin: 4px 20px;
		}
		.infoM6, .infoM4, .infoM3, .infoM2, .infoS1 {
		    border-color: #39f;
		}
		.infoM3 .msgIcon, .infoMedium {
		    background-image: url(/img/msg_icons/info24.png);
		    background-position: 0 0;
		    width: 24px;
		    height: 24px;
		}
		/*MD-2575 - End*/
		/*MD-2783: Start*/
		.resultTab{
			display: flex;
		    align-items: center;
		    width: 100%;
		    padding: .5rem 1.5rem;
		    border-top: 1px solid transparent;
		    border-bottom: 1px solid transparent;
		    border-radius: 0;
		    text-decoration:none;
		}
		.byDefaultHover, .verticalSection:hover{
			color: #0070d2;
    		border-left: 4px solid #0070d2 !important;
    		text-decoration: none !important;
    		border-bottom: 0px;
    		background-color: rgba(0, 112, 210, 0.1);
    	}
    	.verticalSection ul li a:hover, .verticalSection ul li a:focus {
    		text-decoration: none !important;
    	}

    	.expandCollapseIcon:focus,.expandCollapseIcon img:focus, .expandCollapseIcon:hover, .expandCollapseIcon:active {
    		outline: 0 !important;
    		box-shadow: none !important
    	}
    	.filters ul li label:hover, .filters ul li:hover {
    		cursor: pointer;
    		background-color: #eeeeee;
    	}
    	.filters {
    		border: 1px solid #d8dde6;
    		border-radius: 4px;
    		max-width: 185px;
    		margin-top: 0px !important;
    	}
    	.detailSection{
    		margin-left: {!IF(or(isDeploymentType,isSimulationType), '175px', '5px')};
    		margin-right: 5px;
    		border-left: 1px solid #ccc;
    		padding-left: 5px;
    	}
    	.verticalSection .slds-nav-vertical__item:before {
		    z-index: -1;
		}

		.requestHandler:before{
			background: #439cba !important;
		}
		.governorLimits:before{
			background: #0079bc !important;
		}
		.setup:before{
			background: #47cfd2 !important;
		}
		.relationshipTraversal:before{
			background: #88c651 !important;
		}
		.query:before{
			background: #88c651 !important;
		}
		.creation:before{
			background: #f88962 !important;
		}
		.eventProcessing:before{
			background: #eb7092 !important;
		}
		.deploymentPlanProcessing:before{
			background: #699be1 !important;
		}
		.finalProcessing:before{
			background: #55bc9c !important;
		}
		.branchMerge{
			background: #88c651 !important;
		}
		.shiftType{
			background: #e6e6fa !important;
		}
		/* MD-3820 */
		.invocationsProcessing:before{
			background: #54698d !important;
		}
    	/*MD-2783: End*/
		.customPopup{
            background-color: white;
            border-width: 2px;
            left: 20%;
            padding:10px;
            position: absolute;
            z-index: 9999;
            top:10px;
        	width: 60%;
        	height: max-content;
        }
    </style>

    <script>
    //MD-1404 Start
    window.onload = function() {
        //MD-2376
        if('{!$User.UIThemeDisplayed}' == 'Theme3' && (typeof sforce != 'undefined') && sforce && (!!sforce.one))
            window.parent.location.href = '/apex/DeploymentResults?id={!$CurrentPage.parameters.Id}';

        //MD-2783
        deploymentResultId = '{!$CurrentPage.parameters.Id}';
        offset = 0;
        offsetBeforeSearchResult = 0;
     	activitiesBeforeSearchResult = '';
     	isDisplayingSearchResult = false;
     	expandCollapseSrcBeforeSearchResult = '';
		expandCollapseTitleBeforeSearchResult = '';
		deploymentActivityEntryIds = '';//MD-3744
		deploymentActivityEntryIdsBeforeSearchResult = '';//MD-3744
     	setActivityContentHeight();
    }
    /*MD-1229-Start*/
    function closeToastAndRefresh() {
        //MD-1229
        hardRefreshToastComponent();
    }
    function closeToast() {
        $("#toastMessageDiv").hide();
        var url = window.location.href;
        window.history.replaceState({}, document.title, url);
    }
    /*MD-1229-End*/
    //MD-1404 End
    var dStatus = '{!HTMLENCODE(DeploymentResultValue.Status__c)}';

    function toggleElementVisibility(obj, isShow) {

        if(isShow){
            var msg = $(obj).find("img").attr('alt');
            $(obj).parent().next().children().text(msg);
            $(obj).parent().next().show();
        } else {
            $(obj).parent().next().hide();
        }

    }
    //MD-3052 - STRAT
    var dataSetInterval = setIntervalFunction();

    function setIntervalFunction(){
    	dataSetInterval = setInterval(function() {
	        var timerFlag = '{!HTMLENCODE(DeploymentResultValue.Status__c)}';
	        if (timerFlag == 'Finished' || timerFlag == 'Timedout')//MD-2711
	            clearInterval(dataSetInterval);
	        else
	            refreshDataSet();
	    }, 5000);

	    return dataSetInterval;
    }

    function setDeploymentResultCollapse(){
    	clearInterval(dataSetInterval);
    	toggleDeploymentResult();
    }

    function setDeploymentDataSetResultCollapse(){
   		clearInterval(dataSetInterval);
    	toggleDeploymentDataSetResult();
    }

	function setQueryFiltersCollapse(){
   		clearInterval(dataSetInterval);
    	toggleQueryFilters();
    }

	function setMetadataResultsCollapse(){
   		clearInterval(dataSetInterval);
    	toggleMetadataResults();
    }

	function setMetadataComponentsResultsCollapse(){
   		clearInterval(dataSetInterval);
    	toggleMetadataComponentsResults();
    }

    function setDeploymentPlanResultCollapse(){
    	clearInterval(dataSetInterval);
    	toggleDeploymentPlanResult();
    }

    function setStepResultCollapse(){
    	clearInterval(dataSetInterval);
    	toggleDeploymentPlanStep();
    }
    //MD-3052 - END

	//MD-3154: Function to take confirmation.
	function onRerun(){
     	if( !confirm('{!$Label.CONFIRMATION_FOR_RERUN}') )
     		return false;
     	reRun();
    }

     //MD-3193: function to take confirmation before deleting.
     function onDelete(){
     	if( !confirm('{!$Label.CONFIRMATION_FOR_DELETE_DEPELOYMENT_RESULT}') )
     		return false;
     	deleteDeploymentResult();
     }

     //MD-2783: Start Deployment Activity
     function switchToTab(tabIndex, tabClass, detailSectionClass){

     	var allTabs = document.getElementsByClassName(tabClass);

     	for(var i = 0; i<allTabs.length; i++){

     		if(i == tabIndex){

     			document.getElementsByClassName(tabClass)[i].setAttribute("class", (document.getElementsByClassName(tabClass)[i].getAttribute("class")).replace("", " byDefaultHover "));
     			document.getElementsByClassName(detailSectionClass)[i].setAttribute("class", (document.getElementsByClassName(detailSectionClass)[i].getAttribute("class")).replace("slds-hide", "slds-show") );
     		} else{

     			document.getElementsByClassName(tabClass)[i].setAttribute("class", (document.getElementsByClassName(tabClass)[i].getAttribute("class")).replace(" byDefaultHover ", "") );
     			document.getElementsByClassName(detailSectionClass)[i].setAttribute("class", (document.getElementsByClassName(detailSectionClass)[i].getAttribute("class")).replace("slds-show", "slds-hide") );

     			//offset = 0;
     			if(offset == 0){//MD-3744
                	drawDeploymentActivityEntries(deploymentResultId, '')
                	activeDeploymentActivitiesListener();
                }
     		}
     	}
     	setActivityContentHeight();
     }

     //Map to hold icon name by Category
     var categoryIcons = {"Request Handler" : "output",
     					  "Governor Limits" : "work_capacity_limit",
     					  "Setup" : "calibration",
     					  "Relationship Traversal" : "branch_merge",
     					  "Query" : "product_request",
     					  "Creation" : "product_transfer",
     					  "Events Processing" : "shift_type",
     					  "Deployment Plan Processing" : "poll",
						  "Final Processing" : "product_consumed",
						  "Invocations Processing" : "work_queue"}//MD-3820

     //Map to hold slds class name by icon
     var iconClasses = {"Request Handler" : "slds-icon-standard-output",
     					"Governor Limits" : "slds-icon-standard-work-capacity-limit",
     					"Setup" : "slds-icon-standard-calibration",
     					"Relationship Traversal" : "slds-icon-standard-snippets ",
     					"Query" : "slds-icon-standard-product-request",
     					"Creation" : "slds-icon-standard-product-transfer",
     					"Events Processing" : "slds-icon-standard-snippet",
     					"Deployment Plan Processing" : "slds-icon-standard-poll",
						"Final Processing" : "slds-icon-standard-product-consumed",
						"Invocations Processing" : "slds-icon-standard-work-queue"}//MD-3820

     //Map to hold custom class name to over ride color of time line
     var timeLineClasses = {"Request Handler" : "requestHandler",
     					"Governor Limits" : "governorLimits",
     					"Setup" : "setup",
     					"Relationship Traversal" : "relationshipTraversal",
     					"Query" : "query",
     					"Creation" : "creation",
     					"Events Processing" : "eventProcessing",
     					"Deployment Plan Processing" : "deploymentPlanProcessing",
						"Final Processing" : "finalProcessing",
						"Invocations Processing" : "invocationsProcessing"}//MD-3820

     var deploymentResultId;
     var offset;
     var offsetBeforeSearchResult;
     var activitiesBeforeSearchResult;
     var isDisplayingSearchResult;
     var expandCollapseSrcBeforeSearchResult;
	 var expandCollapseTitleBeforeSearchResult;
	 var deploymentActivityEntryIds = '';//MD-3744
	 var deploymentActivityEntryIdsBeforeSearchResult = '';//MD-3744

     //<!-- MD-3266: Static resource updated from SLDS080 to SLDS -->
	//Display Activity Time Line dynamically
	function drawDeploymentActivityEntries(recordId, searchString ){

		var deploymentActivityEntries = new Object();
		Visualforce.remoting.Manager.invokeAction(//MD-3744
		'{!$RemoteAction.DeploymentResultExtension.getDeploymentActivityEntries}', recordId, deploymentActivityEntryIds, searchString,
			function(result,event){
				if(!event.status)
					return;
				var htmlDeploymentActivityEntries = '';
				deploymentActivityEntries = result;

				for(i=0; i<(deploymentActivityEntries.length); i++){

					deploymentActivityEntryIds += deploymentActivityEntries[i].Id +',';
					var date = new Date(deploymentActivityEntries[i].PDRI__Activity_Date_Time__c);
					date = date.toString().slice(0,24);

 						var messageHtml = "";
 						var conditionalIconHtml = "";

 						if(deploymentActivityEntries[i].PDRI__Level__c != null && deploymentActivityEntries[i].PDRI__Level__c == 'Error'){

 							messageHtml = "<img src=\"{!URLFOR($Resource.PDRI__MooverResources, 'images/ban_red_60.png')}\" title=\"Error\" style=\"width:15px;\" alt=\"Error\"/>"
 										+"<span class=\"slds-m-horizontal_xx-small\" style=\"color:red\">"+(deploymentActivityEntries[i].PDRI__Message__c != undefined ? deploymentActivityEntries[i].PDRI__Message__c : "")+"</span>";
 						    conditionalIconHtml = "<img src=\"{!URLFOR($Resource.PDRI__MooverResources, 'images/ban_red_60.png')}\" title=\"Error\" style=\"width:35px;\" alt=\"Error\"/>";

 						}else if(deploymentActivityEntries[i].PDRI__Level__c != null && deploymentActivityEntries[i].PDRI__Level__c == 'Warning'){

 							messageHtml = "<img src=\"{!URLFOR($Resource.PDRI__MooverResources, '/images/warning_orange_60.png')}\" title=\"Warning\" style=\"width:15px;\" alt=\"Warning\"/>"
 										 +"<span class=\"slds-m-horizontal_xx-small\" style=\"color:orange\">"+(deploymentActivityEntries[i].PDRI__Message__c != undefined ? deploymentActivityEntries[i].PDRI__Message__c : "")+"</span>";
 							conditionalIconHtml = "<img src=\"{!URLFOR($Resource.PDRI__MooverResources, '/images/warning_orange_60.png')}\" title=\"Warning\" style=\"width:35px;\" alt=\"Warning\"/>";
 						}else if(deploymentActivityEntries[i].PDRI__Level__c != null && deploymentActivityEntries[i].PDRI__Level__c == 'Info'){
							messageHtml = "<img src=\"{!URLFOR($Resource.PDRI__MooverResources, '/images/info_alt_green_60.png')}\" title=\"Info\" style=\"width:15px;\" alt=\"Info\"/>"
 										 +"<span class=\"slds-m-horizontal_xx-small\">"+(deploymentActivityEntries[i].PDRI__Message__c != undefined ? deploymentActivityEntries[i].PDRI__Message__c : "")+"</span>";
 						}
						else if(deploymentActivityEntries[i].PDRI__Level__c != null && deploymentActivityEntries[i].PDRI__Level__c == 'Debug'){
							messageHtml = "<img src=\"{!URLFOR($Resource.PDRI__SLDS, '/icons/standard/choice_60.png')}\" title=\"Debug\" style=\"width:15px;background: #54698d;border-radius: 3px;line-height: 1;\" alt=\"Debug\"/>"
 										 +"<span class=\"slds-m-horizontal_xx-small\">"+(deploymentActivityEntries[i].PDRI__Message__c != undefined ? deploymentActivityEntries[i].PDRI__Message__c : "")+"</span>";
 						}
 						var indicatorIcon = 'icons/standard/'+(deploymentActivityEntries[i].PDRI__Category__c != undefined ? categoryIcons[deploymentActivityEntries[i].PDRI__Category__c] : 'output')+'_60.png';
 						var iconClass = deploymentActivityEntries[i].PDRI__Category__c != undefined ? iconClasses[deploymentActivityEntries[i].PDRI__Category__c] : 'slds-icon-standard-output';
 						var timeLineClass = deploymentActivityEntries[i].PDRI__Category__c != undefined ? timeLineClasses[deploymentActivityEntries[i].PDRI__Category__c] : 'requestHandler';

 						var errorRow = '';
 						if(deploymentActivityEntries[i].PDRI__Error_Code__c != undefined){

 							errorRow = "<div Id=\"ErrorDiv\" style=\"border-bottom: 1px solid;margin-bottom:15px;\">"
										+"<ul class=\"slds-list_horizontal slds-wrap\">"
											+"<li class=\"slds-grid slds-grid--vertical slds-size_1-of-3 slds-p-bottom_small\">"
												+"<span class=\"slds-text-title slds-p-bottom_x-small\">Error Code</span>"
												+"<span class=\"slds-text-body_medium slds-truncate\" title="+deploymentActivityEntries[i].PDRI__Error_Code__c+">"+deploymentActivityEntries[i].PDRI__Error_Code__c+"</span>"
											+"</li>"
											+"<li class=\"slds-grid slds-grid--vertical slds-size_1-of-3 slds-p-bottom_small\">"
												+"<span class=\"slds-text-title slds-p-bottom_x-small\">Error Key</span>"
												+"<span class=\"slds-text-body_medium slds-truncate\" title="+deploymentActivityEntries[i].PDRI__Error_Key__c+">"+deploymentActivityEntries[i].PDRI__Error_Key__c+"</span>"
											+"</li>"
										+"</ul>"
									+"</div>";
 						}
 						var sourceErrorRow = '';
 						if(deploymentActivityEntries[i].PDRI__Source_Error__c != undefined){

 							sourceErrorRow = "<div id=\"sourceErrorActivity \">"
												+"<ul class=\"slds-list_horizontal slds-wrap\">"
													+"<li class=\"slds-grid slds-grid--vertical slds-size_1-of-3 slds-p-bottom_small\">"
														+"<span class=\"slds-text-title slds-p-bottom_x-small\">Source Error</span>"
														+"<span class=\"slds-text-body_medium slds-truncate\" title="+deploymentActivityEntries[i].PDRI__Source_Error__c+">"+deploymentActivityEntries[i].PDRI__Source_Error__c+"</span>"
													+"</li>"
												+"</ul>"
										    +"</div>";
 						}
						if(deploymentActivityEntries[i].PDRI__Level__c != "Info" && deploymentActivityEntries[i].PDRI__Level__c != "Debug" ){
							//MD-3841 Starts
							htmlDeploymentActivityEntries += "<li>"
															+"<div class=\"slds-timeline__item_expandable expandable "+timeLineClass+"\">"
															+"<span class=\"slds-assistive-text\">Activity</span>"
															+"<div class=\"slds-media\">";
							htmlDeploymentActivityEntries +="<div class=\"slds-media__figure\">"
								+"<button class=\"slds-button slds-button_icon expandCollapseIcon\" title=\"Expand\" aria-controls=\"task-item-base\" aria-expanded=\"false\" style=\"width: 20px;\" onclick=\"showActivityDetail("+offset+");\" >"
								+"<img src=\"{!URLFOR($Resource.PDRI__SLDS, '/icons/utility/chevronright_60.png')}\" alt=\"Expand/Collapse\" class=\"arrow-img expandIcon\" style=\"margin-bottom: 4px;\" />"
							+"</button>";
						}
						else{
							htmlDeploymentActivityEntries += "<li>"
															+"<div class=\"slds-timeline__item_expandable "+timeLineClass+"\">"
															+"<span class=\"slds-assistive-text\">Activity</span>"
															+"<div class=\"slds-media\">";
							htmlDeploymentActivityEntries +="<div class=\"slds-media__figure\" style=\"padding-left:27px;\">";
							}
							//MD-3841 Ends
											htmlDeploymentActivityEntries += "<div class=\"slds-icon_container "+iconClass+"\" title=\""+(deploymentActivityEntries[i].PDRI__Category__c != undefined ? deploymentActivityEntries[i].PDRI__Category__c : "")+"\">"
													+"<img src=\"{!URLFOR($Resource.PDRI__SLDS, '"+indicatorIcon+"')}\" style=\"width:25px;padding-bottom:1px;padding-right:1px;\"/>"
											+"</div>"
										+"</div>"
										+"<div class=\"slds-media__body\">"
											+"<div class=\"slds-grid slds-grid_align-spread slds-timeline__trigger\">"
												+"<div class=\"slds-grid slds-grid_vertical-align-center slds-truncate_container_75 slds-no-space\">"
													+"<h3 class=\"slds-truncate\" title="+(deploymentActivityEntries[i].PDRI__Level__c != undefined ? deploymentActivityEntries[i].PDRI__Level__c : "")+">"
															+"<strong>"+(deploymentActivityEntries[i].PDRI__Subject__c != undefined ? deploymentActivityEntries[i].PDRI__Subject__c : "")+"</strong>"
													+"</h3>"
													+"<div class=\"slds-no-flex\">"
														+"<span class=\"slds-icon_container slds-icon-utility-rotate\" title=\"Recurring Task\">"
															+"<svg class=\"slds-icon slds-icon_xx-small slds-icon-text-default slds-m-left_x-small\" aria-hidden=\"true\">"
																+"<use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"/assets/icons/utility-sprite/svg/symbols.svg#rotate\" />"
															+"</svg>"
															+"<span class=\"slds-assistive-text\">Recurring Task</span>"
														+"</span>"
													+"</div>"
												+"</div>"
												+"<div class=\"slds-timeline__actions slds-timeline__actions_inline\">"
													+"<p class=\"slds-timeline__date\">"+date+"</p>"
												+"</div>"
											+"</div>"
											+messageHtml;

											if(deploymentActivityEntries[i].PDRI__Level__c != "Info" && deploymentActivityEntries[i].PDRI__Level__c != "Debug" ){
												htmlDeploymentActivityEntries += "<article class=\"slds-box slds-timeline__item_details slds-theme_shade slds-m-top_x-small slds-m-horizontal_xx-small\" id=\"task-item-base\" aria-hidden=\"true\">"
												+"<ul class=\"slds-list_horizontal slds-wrap\" style=\"border-bottom: 1px solid;margin-bottom:15px;\">"
												+"<li class=\"slds-grid slds-grid--vertical slds-size_1-of-3 slds-p-bottom_small\">"
													+conditionalIconHtml
												+"</li>"
												+"<li class=\"slds-grid slds-grid--vertical slds-size_1-of-3 slds-p-bottom_small\">"
													+"<span class=\"slds-text-title slds-p-bottom_x-small\">Name</span>"
													+"<span class=\"slds-text-body_medium slds-truncate\" title="+deploymentActivityEntries[i].Name+"><a href=/"+deploymentActivityEntries[i].Id+" target=\"_blank\">"+deploymentActivityEntries[i].Name+"</a></span>"
												+"</li>"
												+"<li class=\"slds-grid slds-grid--vertical slds-size_1-of-3 slds-p-bottom_small\">"
													+"<span class=\"slds-text-title slds-p-bottom_x-small\">Category</span>"
													+"<span class=\"slds-text-body_medium slds-truncate\" title="+deploymentActivityEntries[i].PDRI__Category__c+">"+(deploymentActivityEntries[i].PDRI__Category__c != undefined ? deploymentActivityEntries[i].PDRI__Category__c : "")+"</span>"
												+"</li>"
												+"</ul>"
											+errorRow
											+"<div Id=\"subjectAndMessage\" style=\"border-bottom: 1px solid;margin-bottom:15px;\"	>"
												+"<ul class=\"slds-list_horizontal slds-wrap\">"
													+"<li class=\"slds-grid slds-grid--vertical slds-size_1-of-3 slds-p-bottom_small\">"
														+"<span class=\"slds-text-title slds-p-bottom_x-small\">Subject</span>"
														+"<span class=\"slds-text-body_medium slds-truncate\" title="+deploymentActivityEntries[i].PDRI__Subject__c+">"+(deploymentActivityEntries[i].PDRI__Subject__c != undefined ? deploymentActivityEntries[i].PDRI__Subject__c : "")+"</span>"
													+"</li>"
													+"</ul>"
												+"<ul class=\"slds-list_horizontal slds-wrap\">"
													+"<li class=\"slds-grid slds-grid--vertical slds-size_1-of-1 slds-p-bottom_small\">"
														+"<span class=\"slds-text-title slds-p-bottom_x-small\">Message</span>"
														+"<span title="+deploymentActivityEntries[i].PDRI__Message__c+">"+(deploymentActivityEntries[i].PDRI__Message__c != undefined ? deploymentActivityEntries[i].PDRI__Message__c : "")+"</span>"
													+"</li>"
												+"</ul>"
												+sourceErrorRow
											+"</div>"
									+"</article>";
									offset++;//MD-3841
								}
									htmlDeploymentActivityEntries += "</div>"
							+"</div>"
						+"</div>"
					+"</li>";
				}
				document.getElementById('activityEntries').innerHTML += htmlDeploymentActivityEntries;
				hideSpinner('activitySpinner', 'contentSection');
			}, {escape:true});
	}

    function showActivityDetail(index){
		var checkClassExists = document.getElementsByClassName("expandable")[index].className;
     	if(!checkClassExists.includes('slds-is-open'))
			expandActivityDetail(index);
  		else
  			collapseActivityDetail(index);
     }

     function expandActivityDetail(index){
     	var srcURL = document.getElementsByClassName("expandIcon")[index].getAttribute("src").replace('chevronright_60.png', 'chevrondown_60.png');
		document.getElementsByClassName("expandIcon")[index].setAttribute("src", srcURL);
		document.getElementsByClassName("expandIcon")[index].setAttribute("title", "Collapse");
     	document.getElementsByClassName("expandable")[index].className += ' slds-is-open';
     }

     function collapseActivityDetail(index){
     	var srcURL = document.getElementsByClassName("expandIcon")[index].getAttribute("src").replace('chevrondown_60.png', 'chevronright_60.png');
		document.getElementsByClassName("expandIcon")[index].setAttribute("src", srcURL);
		document.getElementsByClassName("expandIcon")[index].setAttribute("title", "Expand");
		document.getElementsByClassName("expandIcon")[index].setAttribute("src", srcURL);
     	var expendDiv = document.getElementsByClassName("expandable")[index];
     	expendDiv.classList.remove('slds-is-open');
     }

    function resetActivitiesSearchResults(){

    	var searchString = document.getElementById('activitySearchInput').value;
    	if(searchString)
    		return;
    	if(isDisplayingSearchResult){

			offset = offsetBeforeSearchResult;
			deploymentActivityEntryIds = deploymentActivityEntryIdsBeforeSearchResult;//MD-3744
    		document.getElementById('activityEntries').innerHTML = activitiesBeforeSearchResult;
    		isDisplayingSearchResult = false;
		}
    }
	function searchDeploymentActivities(){

		showSpinner('activitySpinner', 'contentSection');
		var searchString = document.getElementById('activitySearchInput').value;

		if(!searchString){

			hideSpinner('activitySpinner', 'contentSection');
			return;
		}
		if(!isDisplayingSearchResult){

			offsetBeforeSearchResult = offset;
			deploymentActivityEntryIdsBeforeSearchResult = deploymentActivityEntryIds;//MD-3744
			activitiesBeforeSearchResult = document.getElementById('activityEntries').innerHTML;
			isDisplayingSearchResult = true;
		}

		document.getElementById('activityEntries').innerHTML = '';
		offset = 0;
		deploymentActivityEntryIds = '';//MD-3744
		drawDeploymentActivityEntries(deploymentResultId, searchString );
	}

	function refreshDeploymentActivities(){

		offset = 0;
        offsetBeforeSearchResult = 0;
     	activitiesBeforeSearchResult = '';
     	isDisplayingSearchResult = false;
     	expandCollapseSrcBeforeSearchResult = '';
		expandCollapseTitleBeforeSearchResult = '';
		deploymentActivityEntryIds = '';//MD-3744
		deploymentActivityEntryIdsBeforeSearchResult = '';//MD-3744
     	document.getElementById('activitySearchInput').value = '';
     	document.getElementById('activityEntries').innerHTML = '';

     	drawDeploymentActivityEntries(deploymentResultId, '');
	}

	function getMoreActivities(){

		var searchString = document.getElementById('activitySearchInput').value;
		drawDeploymentActivityEntries(deploymentResultId, searchString );
	}

	function activeDeploymentActivitiesListener() {

		if(document.getElementById("activityEntries")) {
			document.getElementById("activityEntries").addEventListener("scroll", function() {
			 var scrollTop = document.getElementById("activityEntries").scrollTop;
			 var scrollHeight = document.getElementById("activityEntries").scrollHeight;
			 var clientHeight =  document.getElementById("activityEntries").clientHeight;
				 if(Math.ceil(scrollTop) >= scrollHeight-clientHeight)
					getMoreActivities();
			}, false);
		}
	}

	function setActivityContentHeight(){

		var maxHeight = window.innerHeight - (document.getElementById("headerDiv").offsetHeight + document.getElementById("activityFilterDiv").offsetHeight + 5);

		if('{!$User.UIThemeDisplayed}' == 'Theme3')
			maxHeight -= document.getElementById("AppBodyHeader").offsetHeight + 78;

		document.getElementById("activityEntries").setAttribute("style","height:"+maxHeight+"px;overflow: auto;");
	}
    //MD-2783: End Deployment Activity
	function closeSurveyPopup(){
        document.getElementById("surveyModel").innerHTML = '';
        document.getElementById("contentDiv").setAttribute("style","");
        saveSurvey();
    }
    </script>
    <body style="padding-left: 0%;padding-right: 0%;">
        <div class="slds-notify slds-notify_alert slds-alert_warning" role="alert">
        <span
            class="slds-icon_container slds-icon-utility-warning slds-m-right_x-small"
            title="Warning"
        >
            <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
            <use
                xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#warning"
                xmlns:xlink="http://www.w3.org/1999/xlink"
            ></use>
            </svg>
        </span>
        <h2>
            Weâ€™ve updated our Deployment Result page and will be deprecating this view
            on January 3rd, 2024.
        </h2>
        </div>
        <!--Content div start-->
        <div id="contentDiv">
            <!--MD-1404 Start-->
            <!-- MD-1561 Change the condition -->
            <!-- <apex:outputPanel rendered="{!IF(AND(DeploymentResultValue.Status__c = 'Started',isToastMessageVisible = true),true,false)}"> -->
            <!--MD-2227-->
            <apex:outputPanel id="toastMessageID">
                <apex:outputPanel rendered="{!IF(AND(DeploymentResultValue.PDRI__Status__c = 'Submitted'),true,false)}">
                    <div id="toastMessageDiv">
                        <div class="demo-only" style="height: 4rem;">
                            <div class="slds-notify_container slds-is-relative">
                                <div class="slds-notify slds-notify_toast slds-theme_info" role="alert">
                                    <span class="slds-assistive-text">info</span>
                                    <span class="slds-icon_container slds-icon-utility-info slds-m-right_small slds-no-flex slds-align-top" title="Description of icon when needed">
                                        <div class="slds-icon slds-icon_small">
                                            <!-- MD-3266: Static resource updated from SLDS080 to SLDS, Md-3611 -->
                                            <img src="{!URLFOR($Resource.MooverResources, '/images/info_white_60.png')}"/>
                                        </div>
                                    </span>
                                    <div class="slds-notify__content">
                                        <h2 class="slds-text-heading_small"> {!$Label.DEPLOYMENT_RESULT_TWIST_MESSAGE} <a href="#" onclick="closeToastAndRefresh();">refresh</a></h2>

                                    </div>
                                    <button class="slds-button slds-button_icon slds-button_icon-inverse" title="Close" onclick="closeToast()">
                                        <div class="slds-icon slds-icon_small">
                                            <!-- MD-3266: Static resource updated from SLDS080 to SLDS, Md-3611 -->
                                            <img src="{!URLFOR($Resource.MooverResources, '/images/close_white_60.png')}" />
                                        </div>
                                        <span class="slds-assistive-text">Close</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </apex:outputPanel>
            </apex:outputPanel>

            <!-- MD-2783: Start result header -->
            <div class="slds-page-header" id="headerDiv">
                <div class="slds-page-header__row">
                    <div class="slds-page-header__col-title">
                        <div class="slds-media">
                            <div class="slds-media__figure">
                                <span class="slds-icon_container slds-icon-standard-account">
                                    <!-- MD-3266: Static resource updated from SLDS080 to SLDS -->
                                    <img src="{!URLFOR($Resource.SLDS, 'icons/standard/flow_60.png')}" />
                                </span>
                            </div>
                            <div class="slds-media__body">
                                <div class="slds-page-header__name">
                                    <div class="slds-page-header__name-title">
                                        <h1>
                                            <span id="selectedTab" class="slds-page-header__title slds-truncate" title="Selected Tab" style="display:block;">{!$Label.LABEL_DEPLOYMENT_RESULTS}</span>
                                        </h1>
                                    </div>
                                </div>
                            </div>
                            <div class="slds-page-header__col-actions" style="padding-top:15px;">
                                <div class="slds-page-header__controls">
                                    <div class="slds-page-header__control">
                                        <ul class="slds-button-group-list">
                                            <li>
                                                <!--MD-3579 -->
                                                <apex:form >
                                                    <!-- apex command button start -->
                                                    <apex:outputPanel id="mainForm"><!-- MD-3579 -->

                                                        <!-- MD-2706 Start -->
                                                        <apex:actionFunction name="toggleDeploymentResult" action="{!setDeploymentResultCollapse}" reRender="deploymentResultplusimage,deploymentResultminusimage,deploymentResultSec,deploymentResultHederSec" oncomplete="setIntervalFunction();" /><!-- MD-3052 -->
                                                        <apex:actionFunction name="toggleDeploymentPlanResult" action="{!setDeploymentPlanResultCollapse}" reRender="deploymentPlanResultplusimage,deploymentPlanResultminusimage,deploymentplansec,deploymentPlanResultHeaderSec" oncomplete="setIntervalFunction();"/><!-- MD-3052 -->
                                                        <apex:actionFunction name="toggleDeploymentDataSetResult" action="{!setDeploymentDataSetResultCollapse}" reRender="deploymentDataSetResultplusimage,deploymentDataSetResultminusimage,dataSetResultSec,deploymentDataSetResultHeaderSec" oncomplete="setIntervalFunction();"/><!-- MD-3052 -->
                                                        <apex:actionFunction name="toggleQueryFilters" action="{!setQueryFiltersCollapse}" reRender="deploymentDataSetResultplusimage,deploymentDataSetResultminusimage,queryFiltersSec,queryFiltersHeaderSec" oncomplete="setIntervalFunction();"/>
                                                        <apex:actionFunction name="toggleMetadataResults" action="{!setMetadataResultsCollapse}" reRender="deploymentDataSetResultplusimage,deploymentDataSetResultminusimage,metadataResultsSec,metadataResultsHeaderSec" oncomplete="setIntervalFunction();"/>
                                                        <apex:actionFunction name="toggleMetadataComponentsResults" action="{!setMetadataComponentsResultsCollapse}" reRender="deploymentDataSetResultplusimage,deploymentDataSetResultminusimage,metadataComponentsResultsSec,metadataComponentsResultsHeaderSec" oncomplete="setIntervalFunction();"/>
                                                        <!-- MD-2706 End -->
                                                        <!--MD-1701-->
                                                        <apex:actionFunction name="toggleDeploymentPlanStep" action="{!setStepResultCollapse}" reRender="deploymentplanstepplusimage,deploymentplanstepminusimage,deployPlanStepResultSec,OuterDeploymentPlanPenel,deploymentPlanStepResultHeaderSec" oncomplete="setIntervalFunction();"/><!-- MD-3052 -->
                                                        <!--MD-1752--><!--MD-2227--><!-- MD-1892 --><!-- MD-2311 --><!-- MD-2706 --><!-- MD-2783 -->
                                                        <apex:actionFunction name="refreshDataSet" action="{!disablePollerFunction}" reRender="toastMessageID,dataSetResultSec,OuterDeploymentPlanPenel,deployPlanStepResultSec,deploymentplansec,deploymentResultSec,mainForm,valMSG,deploymentResultplusimage,deploymentResultminusimage,deploymentPlanResultplusimage,deploymentPlanResultminusimage,deploymentActivityTabPanel"/>
                                                        <!-- MD-1229 Start--><!-- MD-2783 -->
                                                        <apex:actionFunction action="{!disablePollerFunction}"  name="hardRefreshToastComponent" reRender="deploymentActivityTabPanel">
                                                            <!-- MD-1561 <apex:param name="isToastVisible" value="false"/>  -->
                                                        </apex:actionFunction>
                                                        <!-- MD-2783 -->
                                                        <apex:actionPoller action="{!disablePollerFunction}" enabled="{!pollerRequest}" interval="5"
                                                                           reRender="mainForm,valMSG,deploymentActivityTabPanel" oncomplete="loadPage();" />
                                                        <apex:actionFunction action="{!refreshCompletePage}" name="hardRefresh" />

                                                        <!-- MD-3154: Start -->
                                                        <apex:actionFunction name="reRun" action="{!reRun}" />
                                                        <apex:actionFunction name="deleteDeploymentResult" action="{!deleteDeploymentResult}" />
                                                        <!-- MD-3154: End -->

                                                        <!-- MD-3579: Start -->
                                                        <apex:actionFunction name="deleteDeploymentDataSetResult" action="{!deleteDeploymentResultSet}" reRender="valMSG">
                                                            <apex:param name="param" value="" assignTo="{!selectedDataSetId}"/>
                                                        </apex:actionFunction>
                                                        <!-- MD-3579: End -->
                                                        <apex:actionFunction action="{!closePopup}" name="saveSurvey" rerender=""  />
                                                        <apex:outputPanel layout="block"  style="display:{!IF(NOT(isVersioningType), '', 'none')};" >
                                                            <div class="slds-button-group">
                                                                <apex:actionFunction action="{!stopService}" name="stopDeploy"/>
                                                                <!--  Command Button -->
                                                                <!-- MD-3193: Added confirmation process. -->
                                                                <apex:commandButton value="Delete" status="blockRequest" onClick="onDelete(); return false;"
                                                                                    styleClass="slds-button slds-button--neutral"  id="deleteService" reRender="deploymentResult,mainForm,valMSG"/>
                                                                <!-- MD-1892 --><!-- MD-2304 -->
                                                                <apex:commandButton style="display:{!IF(isDeploymentType, '', 'none')};" styleClass="slds-button slds-button--neutral" value="Pause" disabled="{!pollerRequest || DeploymentResultValue.PDRI__Status__c = 'Submitted' || DeploymentResultValue.PDRI__Status__c = 'Queued'}"
                                                                                    action="{!pauseService}" id="pauseService" status="blockRequest" rendered="{!(NOT(pauseService))}"/>
                                                                <apex:commandButton style="display:{!IF(isDeploymentType, '', 'none')};" styleClass="slds-button slds-button--neutral" status="blockRequest"
                                                                                    value="Resume" action="{!resumeService}" id="resumeService" rendered="{!(NOT(resumeService))}" disabled="{!pollerRequest}"/>
                                                                <!--MD-1477 Changed rerender condition -->
                                                                <!-- MD-1892 --><!-- MD-2304 -->
                                                                <apex:commandButton styleClass="slds-button slds-button--neutral" value="Stop" onclick="stopDeployment(); return false;"
                                                                                    id="stopService"  rendered="{!(NOT(stopService))}" disabled="{!pollerRequest || DeploymentResultValue.PDRI__Status__c = 'Submitted' || DeploymentResultValue.PDRI__Status__c = 'Queued'}"/>
                                                                <!-- MD-3154: Added confirmation process. -->
                                                                <apex:commandButton style="display:{!IF(and(isDeploymentType,!isMetadataResultsExist), '', 'none')};" styleClass="slds-button slds-button--neutral"  value="Rerun" onClick="onRerun(); return false;"
                                                                                    id="rerunService" rendered="{!reRunService}" disabled="{!pollerRequest}"/>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </apex:outputPanel><!-- MD-3579 -->
                                                </apex:form><!-- MD-3579 -->
                                                <script>
                                                function stopDeployment() {
                                                    if (confirm('{!$Label.pdri__confirmation_stop_deployment}'))
                                                        stopDeploy();
                                                }
                                                /*MD-1229-Start*/
                                                function loadPage() {
                                                    var chk = '{!pollerRequest}';
                                                    refreshPage(chk);
                                                }
                                                /*MD-1229-End*/
                                                function refreshPage(chkflag) {
                                                    if (chkflag == 'false') {
                                                        hardRefresh();
                                                    }
                                                }
                                                </script>
                                                <!-- apex command button END -->
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- MD-2783: End result header-->

            <!-- MD-2783: Start-->
            <div id="contentSection" class="slds-show">
                <apex:outputPanel layout="block"  style="display:{!IF(or(isDeploymentType,isSimulationType), '', 'none')};" >
                    <div id="topTabPanel" class="slds-show" style="position:absolute;width:175px;">
                        <nav class="slds-nav-vertical" aria-label="Sub page">
                            <div class="slds-nav-vertical__section verticalSection " id='deploymentResultsTabId'>
                                <ul>
                                    <li class="slds-nav-vertical__item"><a href="javascript:switchToTab(0, 'verticalSection', 'detailSection');" class="resultTab" aria-describedby="entity-header" aria-current="page">{!IF(isSimulationType, $Label.LABEL_SIMULATION_RESULT, $Label.LABEL_DEPLOYMENT_RESULT)}</a></li>

                                </ul>
                            </div>
                            <div class="slds-nav-vertical__section verticalSection " id='deploymentActivityTabId'>
                                <apex:outputPanel id="deploymentActivityTabPanel">
                                    <ul>
                                        <li class="slds-nav-vertical__item"><a href="javascript:switchToTab(1, 'verticalSection', 'detailSection');" class="resultTab" aria-describedby="folder-header">{!IF(isSimulationType, $Label.LABEL_SIMULATION_ACTIVITY, $Label.LABEL_DEPLOYMENT_ACTIVITY)}</a>
                                        </li>
                                    </ul>
                                </apex:outputPanel>
                            </div>
                        </nav>
                    </div>
                </apex:outputPanel>
                <!-- MD-2783: End-->

                <div class="slds-show detailSection"><!--  MD-2783: Added div to make section tabs -->

                    <!-- MD-271 Error display one place on page-->
                    <!-- MD-1253 Shifted Error message Between button and progress bar -->
                    <span class="severtyMsg">
                        <apex:pageMessages id="valMSG" />
                    </span>
                    <apex:outputPanel StyleClass="Contentt-wrapper" layout="block" id="trackDataMigration" >
                        <apex:include pageName="PDRI__TrackDataMigrationStatus"/>
                        <!--   <apex:iframe src="/apex/TrackDataMigrationStatus?id={!$CurrentPage.parameters.id}"/>-->
                    </apex:outputPanel>
                    <!--MD-1465 Shifted TrackDataMigrationStatus div from rerender block-->
                    <apex:outputPanel id="deploymentResult"  layout="block">
                        <!-- dataset result section delete from here MD-2706-->
                        <!-- Deployment paln result section remoove from here MD-2706 -->
                        <!-- MD-3052  added setDeploymentResultCollapse -->
                        <apex:outputPanel styleClass="relatedListSec" Id="deploymentResultHederSec" onclick="setDeploymentResultCollapse();"><!-- MD-2706 -->
                            <!-- MD-2706 Start MD-3052-->
                            <apex:outputPanel layout="block"  id="deploymentResultplusimage" style="display:{!IF(NOT(deploymentResultVisibility), '', 'none')};" >
                                <div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
                                    <!-- MD-3266 -->
                                    <apex:image value="{!URLFOR($Resource.PDRI__MooverResources, '/images/Plus_Image.png')}" alt="show" />
                                </div>
                            </apex:outputPanel>
                            <!-- MD-3052 -->
                            <apex:outputPanel layout="block"  id="deploymentResultminusimage" style="display:{!IF(deploymentResultVisibility, '', 'none')};">
                                <div class="plusMinusImage" style="margin-top:14px; padding-left:1%">

                                    <!-- MD-3266 -->
                                    <apex:image value="{!URLFOR($Resource.PDRI__MooverResources, '/images/Minus_Image.png')}" alt="hide" />
                                </div>
                            </apex:outputPanel>
                            <!-- MD-2706 End -->
                            <div class="slds-page-header slds-scope" role="banner">
                                <div class="slds-grid">
                                    <div class="slds-col slds-has-flexi-truncate">
                                        <h1 class="slds-text-heading--medium slds-truncate" style="font-size: 1.25rem; color: #16325c;"
                                            title="{! IF(isSimulationType, 'Simulation Result', 'Deployment Result') }">{! IF(isSimulationType, 'Simulation Result', 'Deployment Result') }</h1>
                                    </div>
                                </div>
                            </div>

                        </apex:outputPanel>
                        <!--MD-1561--><!-- MD-3579 -->
                        <apex:outputPanel id="deploymentResultSec" >
                            <apex:outputPanel style="display:{!IF(deploymentResultVisibility, '', 'none')};">
                                <apex:outputPanel id="detailPage" style="float:left;width:100%;">
                                    <div class="slds-panel slds-grid slds-grid--vertical slds-nowrap">
                                        <div class="slds-form--stacked slds-grow slds-scrollable--y">
                                            <apex:outputPanel id="deploymentResultDetail" layout="block">
                                                <!--MD-1229 Start-->
                                                <!-- MD-1331 class "deployResult" added to correct layout -->
                                                <!--MD-1460 Start -->
                                                <div class="slds-panel__section" id="">
                                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult" style="display: inline-block; width: 47%;">
                                                        <span class="slds-form-element__label">Deployment Result Number</span>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static"><apex:outPutField label="false" value="{!DeploymentResultValue.Name}" /></span>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult" style="display: inline-block; width: 47%;">
                                                        <span class="slds-form-element__label">Owner</span>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static"><apex:outPutField label="false" value="{!DeploymentResultValue.OwnerId}" /></span>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult"
                                                         style="display: {!IF(isSimulationType, 'none', 'inline-block')}; width: 47%;">
                                                        <span class="slds-form-element__label">Data Record Failures</span>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static"><apex:outPutField label="false"
                                                                                                                      value="{!DeploymentResultValue.PDRI__Data_Record_Failures__c}" /></span>
                                                        </div>
                                                    </div>
                                                    <!-- <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult"
style="display: inline-block; width: 47%;">
<span class="slds-form-element__label">Deployment</span>
<div class="slds-form-element__control">
<span class="slds-form-element__static"><apex:outPutField label="false"
value="{!deploymentValue}" /></span>
</div>
</div> -->
                                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult" style="display: inline-block; width: 47%;">
                                                        <span class="slds-form-element__label">{! if(or(isDeploymentType,isSimulationType), 'Source Connection', 'VCS Branch') }</span>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outPutField label="false" value="{!DeploymentResultValue.PDRI__Source_Connection__c}" rendered="{!or(isDeploymentType,isSimulationType)}"/>
                                                                <apex:outPutField label="false" value="{!DeploymentResultValue.PDRI__VCS_Branch__c}" rendered="{!isVersioningType}"/>
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult"
                                                         style="display: inline-block; width: 47%;">
                                                        <span class="slds-form-element__label">Result</span>
                                                        <div class="slds-form-element__control">
                                                            <!--MD-1404 Start-->
                                                            <!-- MD-1766 (remove slds-hide and add display:none) -->
                                                            <span class="slds-form-element__static"><apex:outputField value="{!DeploymentResultValue.PDRI__Result_Icon__c}" html-onmouseover="toggleElementVisibility(this, true)" html-onmouseout="toggleElementVisibility(this, false)"/></span>
                                                            <div class="slds-scope slds-popover slds-popover--tooltip slds-nubbin--left-top toggle" role="tooltip" style="position: absolute;top: 15px;left:35px;background: #fff;display:none;">
                                                                <div class="slds-popover__body" style="color: #000;"></div>
                                                            </div>
                                                            <!--MD-1404 End-->
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult"
                                                         style="display: {!IF(isSimulationType, 'none', 'inline-block')}; width: 47%;">
                                                        <!-- MD-1577 -->
                                                        <span class="slds-form-element__label">Destination Connection</span>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static"><apex:outPutField label="false"
                                                                                                                      value="{!DeploymentResultValue.PDRI__Target_Connection__c}" /></span>
                                                        </div>
                                                    </div>
                                                    <div class="" style="clear:both"></div>
                                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult"
                                                         style="display: inline-block; width: 47%;">
                                                        <span class="slds-form-element__label">Status</span>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static"><apex:outPutField label="false" value="{!DeploymentResultValue.PDRI__Status__c}" /></span>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult" style="display: inline-block; width: 47%;">
                                                        <span class="slds-form-element__label">Created By</span>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outPutField label="false" value="{!DeploymentResultValue.CreatedById}" />
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult" style="display: inline-block; width: 47%;">
                                                        <span class="slds-form-element__label">Deployment Name</span>
                                                        <div class="slds-form-element__control" style="word-break: break-word;">
                                                            <span class="slds-form-element__static"><apex:outPutText label="false" value="{!deploymentValue.PDRI__Deployment_Name__c}" />&nbsp;</span>
                                                        </div>
                                                    </div>
                                                    <!-- MD-1331 start -->
                                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult" style="display: inline-block; width: 47%;">
                                                        <span class="slds-form-element__label">Created Date</span>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outPutField label="false" value="{!DeploymentResultValue.CreatedDate}" />
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult" style="display: inline-block; width: 47%;">
                                                        <span class="slds-form-element__label">Deployment Notes</span>
                                                        <div class="slds-form-element__control" style="word-break: break-word;">
                                                            <span class="slds-form-element__static"><apex:outPutText label="false" value="{!deploymentValue.PDRI__Deployment_Notes__c}" />&nbsp;</span>
                                                        </div>
                                                    </div>
                                                    <!-- MD-1404 Start -->
                                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult" style="display: inline-block; width: 47%;">
                                                        <span class="slds-form-element__label">Last Modified Date</span>
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-form-element__static">
                                                                <apex:outPutField label="false" value="{!DeploymentResultValue.LastModifiedDate}" />
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult" style="display: inline-block; width: 47%;">
                                                        <span class="slds-form-element__label">Error</span>
                                                        <div class="slds-form-element__control" style="word-break: break-word;">
                                                            <span class="slds-form-element__static"><apex:outPutText label="false" value="{!DeploymentResultValue.PDRI__Error__c}" />&nbsp;</span>
                                                        </div>
                                                    </div>
                                                    <!-- MD-1404 End -->
                                                    <!-- MD-1331 End -->
                                                </div>
                                                <!--MD-1460 End -->
                                                <!--MD-1229 End-->
                                            </apex:outputPanel>
                                        </div>
                                    </div>
                                </apex:outputPanel>
                            </apex:outputPanel><!-- MD-3579 -->
                        </apex:outputPanel><!-- MD-3579 -->
                        <!-- MD-2706 Start -->
                        <!--MD-1701 Start-->
                        <apex:outputPanel id="OuterDeploymentPlanPenel" >
                            <apex:outputPanel rendered="{!deploymentPlanResult != null}">

                                <apex:outputPanel styleClass="relatedListSec" id="deploymentPlanResultHeaderSec"  ><!-- MD-2706 -->
                                    <!-- MD-3052 Added setDeploymentPlanResultCollapse -->
                                    <apex:outputPanel onclick="setDeploymentPlanResultCollapse();"> <!-- MD-2806 -->
                                        <!-- MD-2706 Start MD-3052 -->
                                        <apex:outputPanel layout="block"  id="deploymentPlanResultplusimage" style="display:{!IF(NOT(deploymentPlanResultVisibility), '', 'none')};" >
                                            <div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
                                                <!-- MD-3266 -->
                                                <apex:image value="{!URLFOR($Resource.PDRI__MooverResources, '/images/Plus_Image.png')}" alt="show" />
                                            </div>
                                        </apex:outputPanel>
                                        <!-- MD-3052 -->
                                        <apex:outputPanel layout="block"  id="deploymentPlanResultminusimage" style="display:{!IF(deploymentPlanResultVisibility, '', 'none')};">
                                            <div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
                                                <!-- MD-3266 -->
                                                <apex:image value="{!URLFOR($Resource.PDRI__MooverResources, '/images/Minus_Image.png')}" alt="hide" />
                                            </div>
                                        </apex:outputPanel>
                                        <!-- MD-2706 End -->
                                        <div class="slds-page-header slds-scope" role="banner">
                                            <div class="slds-grid">
                                                <div class="slds-col slds-has-flexi-truncate">
                                                    <h1 class="slds-text-heading--medium slds-truncate"
                                                        style="font-size: 1.25rem; color: #16325c;"
                                                        title="Deployment Plan Results">Deployment Plan Results</h1>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>
                                    <!-- MD-3579 -->
                                    <apex:outputPanel id="deploymentplansec" >
                                        <apex:outputPanel style="display:{!IF(deploymentPlanResultVisibility, '', 'none')};" styleClass="lineHight">
                                            <!-- MD-1766 -->
                                            <table class="slds-scope slds-table slds-table--bordered slds-table--cell-buffer vertical_top lineHight" ><!-- MD-1701 -->
                                                <thead>
                                                    <tr class="slds-text-title--caps">
                                                        <th scope="col" style="width:10%">
                                                            <div class="slds-truncate" title="Deployment Plan Result Name"></div>
                                                        </th>
                                                        <th scope="col" style="width:40%">
                                                            <div class="slds-truncate" title="Data Set">Deployment Plan</div>
                                                        </th>
                                                        <th scope="col" style="width:10%">
                                                            <div class="slds-truncate" title="Result">Result</div>
                                                        </th>
                                                        <th scope="col" style="width:10%">
                                                            <div class="slds-truncate" title="Data Record Results">Data Record Results</div>
                                                        </th>
                                                        <th scope="col" style="width:10%">
                                                            <div class="slds-truncate" title="Status">Status</div>
                                                        </th>
                                                        <th scope="col" style="width:20%">
                                                            <div class="slds-truncate" style="text-align: center;" title="Error">Error</div>
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <apex:repeat value="{!deploymentPlanResult}" var="deploymentPlanResult" >
                                                        <tr>
                                                            <td data-label="Deployment Plan Step Result Name">
                                                                <div class="slds-truncate" ><a href="/{!deploymentPlanResult.Id}" target="_blank">View Results</a></div>
                                                            </td>
                                                            <td data-label="Deployment Plan" style="max-width: 100px;">
                                                                <div class="slds-truncate"><a href="/{!deploymentPlanResult.Deployment_Plan__c}" target="_blank">{!deploymentPlanResult.Deployment_Plan__r.Name}</a>
                                                                </div>
                                                            </td>

                                                            <td data-label="Deployment Plan Result" >
                                                                <div class="slds-truncate" style="margin-left: 10%;margin-top: 5px;">
                                                                    <div style="margin:0%" >
                                                                        <apex:outputField value="{!deploymentPlanResult.PDRI__Result_Icon__c}" html-onmouseover="toggleElementVisibility(this, true)" html-onmouseout="toggleElementVisibility(this, false)"/>
                                                                    </div>
                                                                    <div class="slds-scope slds-popover slds-popover--tooltip slds-nubbin--left-top toggle" role="tooltip" style="position: absolute;top: 2px;left:46px;background: #fff;display:none;">
                                                                        <div class="slds-popover__body" style="color: #000;"></div>
                                                                    </div>
                                                                </div>
                                                            </td>

                                                            <td data-label="Deployment Plan Record Result">
                                                                <div class="slds-truncate" style="margin-left: 35%;margin-top: 5px;">
                                                                    <apex:outputField value="{!deploymentPlanResult.PDRI__Data_Record_Failures_Icon__c}" html-onmouseover="toggleElementVisibility(this, true)" html-onmouseout="toggleElementVisibility(this, false)"/>
                                                                </div>
                                                                <div class="slds-scope slds-popover slds-popover--tooltip slds-nubbin--left-top toggle" role="tooltip" style="position: absolute;top: 2px;left:55%;background: #fff;display:none;">
                                                                    <div class="slds-popover__body" style="color: #000;"></div>
                                                                </div>
                                                            </td>

                                                            <td data-label="Deployment Plan Status">
                                                                <div class="slds-truncate" style="white-space: normal;">{!deploymentPlanResult.Status__c}</div>
                                                            </td>

                                                            <td data-label="Deployment Plan Error">
                                                                <div class="slds-truncate wordBreak" style="white-space: normal;">{!deploymentPlanResult.Error__c}</div>
                                                            </td>
                                                        </tr>
                                                    </apex:repeat>
                                                </tbody>
                                            </table>
                                        </apex:outputPanel><!-- MD-3579 -->
                                    </apex:outputPanel><!-- MD-3579 -->
                                </apex:outputPanel>
                                <!-- MD-2706 Start plan step result -->
                                <apex:outputPanel styleClass="relatedListSec" id="deploymentPlanStepResultHeaderSec" ><!-- MD-2706 -->
                                    <!-- MD-2706 Start MD-3052 -->
                                    <apex:outputPanel onclick="setStepResultCollapse();"> <!-- MD-2806 -->
                                        <!-- MD-2706 Start MD-3052 -->
                                        <apex:outputPanel layout="block"  id="deploymentplanstepplusimage" style="display:{!IF(NOT(stepResultVisibility), '', 'none')};" >
                                            <div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
                                                <!-- MD-3266 -->
                                                <apex:image value="{!URLFOR($Resource.PDRI__MooverResources, '/images/Plus_Image.png')}" alt="show" />
                                            </div>
                                        </apex:outputPanel>
                                        <!-- MD-3052  -->
                                        <apex:outputPanel layout="block"  id="deploymentplanstepminusimage" style="display:{!IF(stepResultVisibility, '', 'none')};" >
                                            <div class="plusMinusImage" style="margin-top:14px; padding-left:1%">

                                                <!-- MD-3266 -->
                                                <apex:image value="{!URLFOR($Resource.PDRI__MooverResources, '/images/Minus_Image.png')}" alt="hide" />
                                            </div>
                                        </apex:outputPanel>
                                        <!-- MD-2706 End -->
                                        <div class="slds-page-header slds-scope" role="banner">
                                            <div class="slds-grid">
                                                <div class="slds-col slds-has-flexi-truncate">
                                                    <h1 class="slds-text-heading--medium slds-truncate"
                                                        style="font-size: 1.25rem; color: #16325c;"
                                                        title="Deployment Plan Step Results">Deployment Plan Step Results</h1>
                                                </div>
                                            </div>
                                        </div>
                                    </apex:outputPanel>
                                    <!-- MD-3579 -->
                                    <apex:outputPanel id="deployPlanStepResultSec"  >
                                        <apex:outputPanel style="display:{!IF(stepResultVisibility, '', 'none')};" >
                                            <!-- MD-1766 -->
                                            <table class="slds-scope slds-table slds-table--bordered slds-table--cell-buffer vertical_top lineHight" ><!-- MD-1701 -->
                                                <thead>
                                                    <tr class="slds-text-title--caps">
                                                        <th scope="col" style="width:10%">
                                                            <div class="slds-truncate" title="Deployment Plan Step Result Name"></div>
                                                        </th>
                                                        <th scope="col" style="width:40%">
                                                            <div class="slds-truncate" title="Deployment Plan Step">Deployment Plan Step</div>
                                                        </th>
                                                        <th scope="col" style="width:10%">
                                                            <div class="slds-truncate" title="Result">Result</div>
                                                        </th>
                                                        <th scope="col" style="width:10%">
                                                            <div class="slds-truncate" title="Data Record Results">Data Record Results</div>
                                                        </th>
                                                        <th scope="col" style="width:10%">
                                                            <div class="slds-truncate" title="Status">Status</div>
                                                        </th>
                                                        <th scope="col" style="width:20%">
                                                            <div class="slds-truncate" style="text-align: center;" title="Error">Error</div>
                                                        </th>
                                                    </tr>
                                                </thead>

                                                <tbody>
                                                    <apex:repeat value="{!deploymentPlanResult.Deployment_Plan_Step_Results__r}" var="deployPlanStepResult" >
                                                        <tr>
                                                            <td data-label="Deployment Plan Step Result Name">
                                                                <div class="slds-truncate" ><a href="/{!deployPlanStepResult.Id}" target="_blank">View Results</a></div>
                                                            </td>
                                                            <td data-label="Deployment Plan Step" style="max-width: 100px;">
                                                                <div class="slds-truncate"><a href="/{!deployPlanStepResult.Deployment_Plan_Step__c}" target="_blank">{!deployPlanStepResult.Deployment_Plan_Step__r.Name}</a>
                                                                </div>
                                                            </td>

                                                            <td data-label="Deployment Plan Step Result" >
                                                                <div class="slds-truncate" style="margin-left: 10%;margin-top: 5px;">
                                                                    <div style="margin:0%" >
                                                                        <apex:outputField value="{!deployPlanStepResult.PDRI__Result_Icon__c}" html-onmouseover="toggleElementVisibility(this, true)" html-onmouseout="toggleElementVisibility(this, false)"/>
                                                                    </div>
                                                                    <div class="slds-scope slds-popover slds-popover--tooltip slds-nubbin--left-top toggle" role="tooltip" style="position: absolute;top: 2px;left:46px;background: #fff;display:none;">
                                                                        <div class="slds-popover__body" style="color: #000;"></div>
                                                                    </div>
                                                                </div>
                                                            </td>

                                                            <td data-label="Deployment Plan Step Record Result">
                                                                <div class="slds-truncate" style="margin-left: 35%;margin-top: 5px;">
                                                                    <apex:outputField value="{!deployPlanStepResult.PDRI__Data_Record_Failures_Icon__c}" html-onmouseover="toggleElementVisibility(this, true)" html-onmouseout="toggleElementVisibility(this, false)"/>
                                                                </div>
                                                                <div class="slds-scope slds-popover slds-popover--tooltip slds-nubbin--left-top toggle" role="tooltip" style="position: absolute;top: 2px;left:55%;background: #fff;display:none;">
                                                                    <div class="slds-popover__body" style="color: #000;"></div>
                                                                </div>
                                                            </td>

                                                            <td data-label="Deployment Plan Step Status">
                                                                <div class="slds-truncate" style="white-space: normal;">{!deployPlanStepResult.Status__c}</div>
                                                            </td>

                                                            <td data-label="Deployment Plan Step Error">
                                                                <div class="slds-truncate wordBreak" style="white-space: normal;">{!deployPlanStepResult.Error__c}</div>
                                                            </td>
                                                        </tr>
                                                    </apex:repeat>
                                                </tbody>

                                            </table>
                                        </apex:outputPanel><!-- MD-3579 -->
                                    </apex:outputPanel><!-- MD-3579 -->
                                    <!-- </apex:outputPanel> -->
                                </apex:outputPanel>
                                <!-- MD-2706 End plan step result-->
                            </apex:outputPanel>
                        </apex:outputPanel>
                        <!--MD-1701 End-->
                        <apex:outputPanel layout="block"  style="display:{!IF(or(isDeploymentType,isSimulationType), '', 'none')};" >
                            <apex:outputPanel styleClass="relatedListSec" id="deploymentDataSetResultHeaderSec" ><!-- MD-2706 -->
                                <apex:outputPanel onclick="setDeploymentDataSetResultCollapse();"> <!-- MD-2806 , MD-3052-->
                                    <!-- MD-2706 Start MD-3052-->
                                    <apex:outputPanel layout="block"  id="deploymentDataSetResultplusimage" style="display:{!IF(NOT(deploymentDataSetResultVisibility), '', 'none')};" >
                                        <div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
                                            <!-- MD-3266 -->
                                            <apex:image value="{!URLFOR($Resource.PDRI__MooverResources, '/images/Plus_Image.png')}" alt="show" />
                                        </div>
                                    </apex:outputPanel>
                                    <!-- MD-3052 -->
                                    <apex:outputPanel layout="block"  id="deploymentDataSetResultminusimage" style="display:{!IF(deploymentDataSetResultVisibility, '', 'none')};">
                                        <div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
                                            <!-- MD-3266 -->
                                            <apex:image value="{!URLFOR($Resource.PDRI__MooverResources, '/images/Minus_Image.png')}" alt="hide" />
                                        </div>
                                    </apex:outputPanel>
                                    <!-- MD-2706 End -->
                                    <div class="slds-page-header slds-scope" role="banner">
                                        <div class="slds-grid">
                                            <div class="slds-col slds-has-flexi-truncate">
                                                <h1 class="slds-text-heading--medium slds-truncate"
                                                    title="{! IF(isSimulationType, 'Simulation Data Set Results', 'Deployment Data Set Results') }" style="font-size: 1.25rem; color: #16325c;">{! IF(isSimulationType, 'Simulation Data Set Results', 'Deployment Data Set Results') }</h1>
                                            </div>
                                        </div>
                                    </div>
                                </apex:outputPanel>
                                <!--MD-1752--><!-- MD-2887 --><!-- MD-3579 -->
                                <apex:outputPanel id="dataSetResultSec" styleclass="bottomPadding" >
                                    <apex:outputPanel style="display:{!IF(deploymentDataSetResultVisibility, '', 'none')};">
                                        <!-- MD-1766 -->
                                        <table class="slds-scope slds-table slds-table--bordered slds-table--cell-buffer vertical_top lineHight" ><!-- MD-1701 -->
                                            <thead>
                                                <tr class="slds-text-title--caps">
                                                    <th scope="col" style="width:10%">
                                                        <!-- MD-1601 -->
                                                        <!-- MD-MD-1748 Remove Header -->
                                                        <div class="slds-truncate" title="Deployment Data Set Result Name"></div>
                                                    </th>
                                                    <th scope="col" style="width:40%">
                                                        <div class="slds-truncate" title="Data Set">Data Set</div>
                                                    </th>
                                                    <th scope="col" style="width:5%">
                                                        <div class="slds-truncate" title="Result">Result</div>
                                                    </th>
                                                    <th scope="col" style="width:10%; display:{!IF(isSimulationType, 'none', '')};">
                                                        <div class="slds-truncate" title="Data Record Results">Data Record Results</div>
                                                    </th>
                                                    <th scope="col" style="width:5%">
                                                        <div class="slds-truncate" title="Status">Status</div>
                                                    </th>
                                                    <th scope="col" style="width:20%">
                                                        <div class="slds-truncate" style="text-align: center;" title="Error">Error</div>
                                                    </th>
                                                    <th scope="col" style="width:10%">
                                                        <div class="slds-truncate" style="text-align: center;" title="Error"></div>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!--MD-1752 Comment-->
                                                <!--<apex:form >-->
                                                <!--MD-1229 Start-->
                                                <apex:repeat value="{!DeploymentResultValue.Deployment_Data_Set_Results__r}" var="dataSetBatchResult" >
                                                    <tr>
                                                        <td data-label="Deployment Result Name">
                                                            <!-- MD-1404 Start -->
                                                            <div class="slds-truncate" ><a href="/{!dataSetBatchResult.Id}" target="_blank">View Results</a></div>
                                                            <!-- MD-1404 End -->
                                                        </td>
                                                        <td data-label="Data Set" style="max-width: 100px;">
                                                            <div class="slds-truncate"><a href="/{!dataSetBatchResult.Data_Set__c}" target="_blank">{!dataSetBatchResult.Data_Set__r.Name}</a>
                                                            </div>
                                                        </td>

                                                        <td data-label="Data Set Result" >
                                                            <!--MD-1404 Start-->
                                                            <div class="slds-truncate" style="margin-left: 10%;margin-top: 5px;">
                                                                <div style="margin:0%" >
                                                                    <apex:outputField value="{!dataSetBatchResult.PDRI__Result_Icon__c}" html-onmouseover="toggleElementVisibility(this, true)" html-onmouseout="toggleElementVisibility(this, false)"/>
                                                                </div>
                                                                <!-- MD-1766 removed slds-hide and add display:none property-->
                                                                <div class="slds-scope slds-popover slds-popover--tooltip slds-nubbin--left-top toggle" role="tooltip" style="position: absolute;top: 2px;left:46px;background: #fff;display:none;">
                                                                    <div class="slds-popover__body" style="color: #000;"></div>
                                                                </div>
                                                            </div>
                                                        </td>

                                                        <td data-label="Data Set Result" style="display:{!IF(isSimulationType, 'none', '')};">
                                                            <!-- MD-1406 added outputfield -->
                                                            <div class="slds-truncate" style="margin-left: 35%;margin-top: 5px;">
                                                                <apex:outputField value="{!dataSetBatchResult.PDRI__Data_Record_Failures_Icon__c}" html-onmouseover="toggleElementVisibility(this, true)" html-onmouseout="toggleElementVisibility(this, false)"/>
                                                            </div>
                                                            <!-- MD-1766 removed slds-hide and add display:none property-->
                                                            <div class="slds-scope slds-popover slds-popover--tooltip slds-nubbin--left-top toggle" role="tooltip" style="position: absolute;top: 2px;left:55%;background: #fff;display:none;">
                                                                <div class="slds-popover__body" style="color: #000;"></div>
                                                            </div>
                                                            <!--MD-1404 End-->
                                                        </td>

                                                        <td data-label="Data Set Status">
                                                            <div class="slds-truncate" style="white-space: normal;">{!dataSetBatchResult.Status__c}</div>
                                                        </td>

                                                        <td data-label="Data Set Error">
                                                            <div class="slds-truncate wordBreak" style="white-space: normal;">{!dataSetBatchResult.Error__c}</div>
                                                        </td>

                                                        <td data-label="Data Set Error">
                                                            <div class="slds-truncate" >
                                                                <a href="javascript:deleteDeploymentDataSetResult('{!dataSetBatchResult.Id}');">Del</a>
                                                                <!-- MD-3579: End  -->
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </apex:repeat>
                                                <!--MD-1752 Comment-->
                                                <!--</apex:form>-->
                                                <!--MD-1229 End-->
                                            </tbody>
                                        </table>
                                        <!--MD-1752-->
                                    </apex:outputPanel><!-- MD-3579 -->
                                </apex:outputPanel><!-- MD-3579 -->
                            </apex:outputPanel>
                        </apex:outputPanel>
                        <!-- MD-2706 End -->

                        <apex:outputPanel layout="block"  style="display:{!IF(isMetadataResultsExist, '', 'none')};" >
                            <apex:outputPanel styleClass="relatedListSec" id="metadataResultsHeaderSec" >
                                <apex:outputPanel onclick="setMetadataResultsCollapse();">
                                    <apex:outputPanel layout="block"  id="metadataResultsPlusImage" style="display:{!IF(NOT(metadataResultsVisibility), '', 'none')};" >
                                        <div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
                                            <apex:image value="{!URLFOR($Resource.PDRI__MooverResources, '/images/Plus_Image.png')}" alt="show" />
                                        </div>
                                    </apex:outputPanel>
                                    <apex:outputPanel layout="block"  id="metadataResultsMinusImage" style="display:{!IF(metadataResultsVisibility, '', 'none')};">
                                        <div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
                                            <apex:image value="{!URLFOR($Resource.PDRI__MooverResources, '/images/Minus_Image.png')}" alt="hide" />
                                        </div>
                                    </apex:outputPanel>
                                    <div class="slds-page-header slds-scope" role="banner">
                                        <div class="slds-grid">
                                            <div class="slds-col slds-has-flexi-truncate">
                                                <h1 class="slds-text-heading--medium slds-truncate"
                                                    title="Metadata Results" style="font-size: 1.25rem; color: #16325c;">Metadata Results</h1>
                                            </div>
                                        </div>
                                    </div>
                                </apex:outputPanel>
                                <apex:outputPanel id="metadataResultsSec" styleclass="bottomPadding" >
                                    <apex:outputPanel style="display:{!IF(metadataResultsVisibility, '', 'none')};">
                                        <table class="slds-scope slds-table slds-table--bordered slds-table--cell-buffer vertical_top lineHight" >
                                            <thead>
                                                <th class="slds-text-title--caps" style="width:10%">
                                                    <div class="slds-truncate" title="Metadata Deployment Result Number"></div>
                                                </th>
                                                <th scope="col" style="width:10%">
                                                    <div class="slds-truncate" title="Result">Result</div>
                                                </th>
                                                <th scope="col" style="width:15%">
                                                    <div class="slds-truncate" title="Status">Validation</div>
                                                </th>
                                                <th scope="col" style="width:15%">
                                                    <div class="slds-truncate" title="Status">Status</div>
                                                </th>
                                                <th scope="col" style="width:50%">
                                                    <div class="slds-truncate" style="text-align: center;" title="Error">Error</div>
                                                </th>
                                            </thead>
                                            <tbody>
                                                <apex:repeat value="{!DeploymentResultValue.Metadata_Deployment_Results__r}" var="metadataResult" >
                                                    <tr>
                                                        <td data-label="Metadata Deployment Result Number">
                                                            <div class="slds-truncate" ><a href="/{!metadataResult.Id}" target="_blank">View Results</a></div>
                                                        </td>
                                                        <td data-label="Metadata Deployment Result" >
                                                            <div class="slds-truncate" style="margin-top: 5px;">
                                                                <div style="margin:0%" >
                                                                    <apex:outputField value="{!metadataResult.PDRI__Result_Icon__c}" html-onmouseover="toggleElementVisibility(this, true)" html-onmouseout="toggleElementVisibility(this, false)"/>
                                                                </div>
                                                                <div class="slds-scope slds-popover slds-popover--tooltip slds-nubbin--left-top toggle" role="tooltip" style="position: absolute;top: 2px;left:46px;background: #fff;display:none;">
                                                                    <div class="slds-popover__body" style="color: #000;"></div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td data-label="Metadata Validation Deployment">
                                                            <div class="slds-truncate" style="margin-top: 5px;">
                                                                <div style="margin:0%" >
                                                                    <apex:outputField value="{!metadataResult.PDRI__Validation_Icon__c}"/>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td data-label="Metadata Deployment Status">
                                                            <div class="slds-truncate" style="white-space: normal;">{!metadataResult.PDRI__Status__c}</div>
                                                        </td>
                                                        <td data-label="Metadata Deployment Error">
                                                            <div class="slds-truncate wordBreak" style="white-space: normal;">{!metadataResult.PDRI__Error__c}</div>
                                                        </td>
                                                    </tr>
                                                </apex:repeat>
                                            </tbody>
                                        </table>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                            </apex:outputPanel>
                        </apex:outputPanel>

                        <apex:outputPanel layout="block"  style="display:{!IF(isMetadataResultsExist, '', 'none')};" >
                            <apex:outputPanel styleClass="relatedListSec" id="metadataComponentsResultsHeaderSec" >
                                <apex:outputPanel onclick="setMetadataComponentsResultsCollapse();">
                                    <apex:outputPanel layout="block"  id="metadataComponentsResultsPlusImage" style="display:{!IF(NOT(metadataComponentsResultsVisibility), '', 'none')};" >
                                        <div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
                                            <apex:image value="{!URLFOR($Resource.PDRI__MooverResources, '/images/Plus_Image.png')}" alt="show" />
                                        </div>
                                    </apex:outputPanel>
                                    <apex:outputPanel layout="block"  id="metadataComponentsResultsMinusImage" style="display:{!IF(metadataComponentsResultsVisibility, '', 'none')};">
                                        <div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
                                            <apex:image value="{!URLFOR($Resource.PDRI__MooverResources, '/images/Minus_Image.png')}" alt="hide" />
                                        </div>
                                    </apex:outputPanel>
                                    <div class="slds-page-header slds-scope" role="banner">
                                        <div class="slds-grid">
                                            <div class="slds-col slds-has-flexi-truncate">
                                                <h1 class="slds-text-heading--medium slds-truncate"
                                                    title="Metadata Components Deployment Results" style="font-size: 1.25rem; color: #16325c;">Metadata Components Deployment Results</h1>
                                            </div>
                                        </div>
                                    </div>
                                </apex:outputPanel>
                                <apex:outputPanel id="metadataComponentsResultsSec" styleclass="bottomPadding" >
                                    <apex:outputPanel style="display:{!IF(metadataComponentsResultsVisibility, '', 'none')};">
                                        <table class="slds-scope slds-table slds-table--bordered slds-table--cell-buffer vertical_top lineHight" >
                                            <thead>
                                                <th class="slds-text-title--caps" style="width:10%">
                                                    <div class="slds-truncate" title="Component Deployment Result Number"></div>
                                                </th>
                                                <th scope="col" style="width:10%">
                                                    <div class="slds-truncate" title="Result">Result</div>
                                                </th>
                                                <th scope="col" style="width:20%">
                                                    <div class="slds-truncate" title="Status">Component Type</div>
                                                </th>
                                                <th scope="col" style="width:20%">
                                                    <div class="slds-truncate" title="Status">Component Name</div>
                                                </th>
                                                <th scope="col" style="width:40%">
                                                    <div class="slds-truncate" style="text-align: center;" title="Problem">Problem</div>
                                                </th>
                                            </thead>
                                            <tbody>
                                                <apex:repeat value="{!metadataDeploymentResultValue.Metadata_Component_Deployment_Results__r}" var="metadataComponentResult" >
                                                    <tr>
                                                        <td data-label="Component Deployment Result Number">
                                                            <div class="slds-truncate" ><a href="/{!metadataComponentResult.Id}" target="_blank">View Results</a></div>
                                                        </td>
                                                        <td data-label="Component Deployment Result" >
                                                            <div class="slds-truncate" style="margin-left: 10%;margin-top: 5px;">
                                                                <div style="margin:0%" >
                                                                    <apex:outputField value="{!metadataComponentResult.PDRI__Result_Icon__c}" html-onmouseover="toggleElementVisibility(this, true)" html-onmouseout="toggleElementVisibility(this, false)"/>
                                                                </div>
                                                                <div class="slds-scope slds-popover slds-popover--tooltip slds-nubbin--left-top toggle" role="tooltip" style="position: absolute;top: 2px;left:46px;background: #fff;display:none;">
                                                                    <div class="slds-popover__body" style="color: #000;"></div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td data-label="Component Type">
                                                            <div class="slds-truncate" style="white-space: normal;">{!metadataComponentResult.Component_Type__c}</div>
                                                        </td>
                                                        <td data-label="Component Name">
                                                            <div class="slds-truncate" style="white-space: normal;">{!metadataComponentResult.Component_Name__c}</div>
                                                        </td>
                                                        <td data-label="Component Deployment Problem">
                                                            <div class="slds-truncate wordBreak" style="white-space: normal;">{!metadataComponentResult.Problem__c}</div>
                                                        </td>
                                                    </tr>
                                                </apex:repeat>
                                            </tbody>
                                        </table>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                            </apex:outputPanel>
                        </apex:outputPanel>

                        <apex:outputPanel layout="block"  style="display:{!IF(isQueryFiltersExist, '', 'none')};" >
                            <apex:outputPanel styleClass="relatedListSec" id="queryFiltersHeaderSec" >
                                <apex:outputPanel onclick="setQueryFiltersCollapse();">
                                    <apex:outputPanel layout="block"  id="queryFiltersPlusImage" style="display:{!IF(NOT(queryFiltersVisibility), '', 'none')};" >
                                        <div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
                                            <apex:image value="{!URLFOR($Resource.PDRI__MooverResources, '/images/Plus_Image.png')}" alt="show" />
                                        </div>
                                    </apex:outputPanel>
                                    <apex:outputPanel layout="block"  id="queryFiltersMinusImage" style="display:{!IF(queryFiltersVisibility, '', 'none')};">
                                        <div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
                                            <apex:image value="{!URLFOR($Resource.PDRI__MooverResources, '/images/Minus_Image.png')}" alt="hide" />
                                        </div>
                                    </apex:outputPanel>
                                    <div class="slds-page-header slds-scope" role="banner">
                                        <div class="slds-grid">
                                            <div class="slds-col slds-has-flexi-truncate">
                                                <h1 class="slds-text-heading--medium slds-truncate"
                                                    title="Query Filters" style="font-size: 1.25rem; color: #16325c;">Query Filters</h1>
                                            </div>
                                        </div>
                                    </div>
                                </apex:outputPanel>
                                <apex:outputPanel id="queryFiltersSec" styleclass="bottomPadding" >
                                    <apex:outputPanel style="display:{!IF(queryFiltersVisibility, '', 'none')};">
                                        <table class="slds-scope slds-table slds-table--bordered slds-table--cell-buffer vertical_top lineHight" >
                                            <thead>
                                                <tr class="slds-text-title--caps">
                                                    <th scope="col" style="width:10%">
                                                        <div class="slds-truncate" title="Query Filter Number">Query Filter Number</div>
                                                    </th>
                                                    <th scope="col" style="width:30%">
                                                        <div class="slds-truncate" title="Object Name">Object Name</div>
                                                    </th>
                                                    <th scope="col" style="width:60%">
                                                        <div class="slds-truncate" title="Filter">Filter</div>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <apex:repeat value="{!queryFilters}" var="queryFilter" >
                                                    <tr>
                                                        <td data-label="Query Filter Number">
                                                            <div class="slds-truncate" >
                                                                <a href="/{!queryFilter.Id}" target="_blank">{!queryFilter.Name}</a>
                                                            </div>
                                                        </td>
                                                        <td data-label="Object Name" style="max-width: 100px;">
                                                            <div class="slds-truncate">{!queryFilter.Object_Name__c}
                                                            </div>
                                                        </td>
                                                        <td data-label="Filter" style="max-width: 100px;">
                                                            <div class="slds-truncate">{!queryFilter.Filter__c}
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </apex:repeat>
                                            </tbody>
                                        </table>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                            </apex:outputPanel>
                        </apex:outputPanel>

                    </apex:outputPanel>
                    <!--MD-1404 Start-->
                    <apex:outputpanel >
                        <apex:actionstatus id="blockRequest">
                            <apex:facet name="start">
                                <div class="slds-spinner_container">
                                    <div class="slds-spinner slds-spinner--medium">
                                        <span class="slds-assistive-text">Loading</span>
                                        <div class="slds-spinner__dot-a"></div>
                                        <div class="slds-spinner__dot-b"></div>
                                    </div>
                                </div>
                            </apex:facet>
                        </apex:actionstatus>
                    </apex:outputpanel>
                    <!--MD-1404 End-->
                </div>

                <!-- MD-2783: Start -->
                <div class="slds-hide detailSection">
                    <div id="activityFilterDiv" class="slds-form-element" style="padding-top: 20px;padding-bottom:40px;">

                        <div class="sub-sec" style="padding-left: 20px;"><!--display:none;-->

                            <div class="slds-form-element slds-m-top--x-small">
                                <div class="slds-form-element__control">
                                    <input type="text" id="activitySearchInput" placeholder="{!$Label.PLACEHOLDER_SEARCH_DEPLOYMENT_ACTIVITY}" onKeyup="resetActivitiesSearchResults();" class="topFilterAccordion slds-input slds-medium-size--1-of-3" style="width :550px;">
                                    <span class="slds-icon_container slds-icon-utility-search slds-input__icon slds-input__icon_right search_icon" style="margin-left:-30px;" >
                                        <img class="icon_img folder-detail-panel cursorPointer" onclick="searchDeploymentActivities();" src="{!URLFOR($Resource.SLDS, '/icons/utility/search_60.png')}" alt="Search" />
                                    </span>
                                </input>
                                <span class="slds-form-element tooltipIcon " onmouseover="tooltipDisplay('tooltipSearchDeploymentActivity');" onmouseout="toolTipDisplayOut('tooltipSearchDeploymentActivity');" style="left: 20px;">
                                    <div class="slds-form-element__icon slds-align-middle" >
                                        <img class="slds-button__icon" src="{!URLFOR($Resource.SLDS, '/icons/utility/info_60.png')}" alt="Help Text" />
                                    </div>
                                    <div class="slds-popover slds-popover--tooltip slds-nubbin--left-top toggle slds-hide elementDetailToolTip" role="tooltip" style="position: absolute;top: -5px;left: 28px;float: left;min-width: 312px;" id="tooltipSearchDeploymentActivity">
                                        <div class="slds-popover__body">{!$Label.TOOLTIP_SEARCH_DEPLOYMENT_ACTIVITY}</div>
                                    </div>
                                </span>
                                <a class="slds-truncate" href="#">
                                    <span class="slds-truncate" style="padding-left: 35px;">
                                        <img src="{!URLFOR($Resource.MooverResources, '/images/refresh_blue_60.png')}" alt="Refresh" title="Refresh" class="arrow" style="border-radius:8px;" width="21px" onclick="refreshDeploymentActivities();"/>
                                        <!--MD-3780-->
                                        <span class="slds-form-element tooltipIcon " onmouseover="tooltipDisplay('tooltipRefreshDeploymentActivity');" onmouseout="toolTipDisplayOut('tooltipRefreshDeploymentActivity');" style="padding-left: 10px;">
                                            <div class="slds-form-element__icon slds-align-middle" >
                                                <img class="slds-button__icon" src="{!URLFOR($Resource.SLDS, '/icons/utility/info_60.png')}" alt="Help Text" />
                                            </div>
                                            <div class="slds-popover slds-popover--tooltip slds-nubbin--left-top toggle slds-hide elementDetailToolTip" role="tooltip" style="position: absolute;top: -5px;left: 37px;float: left;min-width: 476px;" id="tooltipRefreshDeploymentActivity">
                                                <div class="slds-popover__body">{!$Label.TOOLTIP_REFRESH_DEPLOYMENT_ACTIVITY}</div>
                                            </div>
                                        </span>
                                    </span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                    <ul class="slds-timeline" id="activityEntries"></ul>
              </div>
            </div>
            <div class="slds">
                <div id="activitySpinner" class="slds-modal__content esign-large-p-bottom slds-hide" >
                    <div class="slds-grid slds-grid--align-center ">
                        <div class="slds-spinner--large ">
                            <img src="{!URLFOR($Resource.SLDS, '/images/spinners/slds_spinner_brand.gif')}" alt="Loading..." />
                        </div>
                    </div>
                </div>
            </div>
            <script>switchToTab(0, 'verticalSection', 'detailSection');</script>

            <!-- MD-2783: End -->
        </div>
        <!--Content div end-->
        <!--Popup div start-->
        <div id="surveyModel">
            <apex:outputPanel id="popup">
                <apex:outputPanel styleClass="customPopup" layout="block" rendered="{!displayPopUp}" >
                    <apex:form >
                        <script>
                            document.getElementById("contentDiv").setAttribute("style","pointer-events: none;opacity: 0.4;");
                        </script>
                        <apex:commandbutton image="{!URLFOR($Resource.PDRI__SLDS, '/icons/action/close_60.png')}" id="exportbtn" onclick="closeSurveyPopup();" style="margin-left: 96%; margin-bottom: 5px; background-color: #70757A" /><br/>
                        <iframe src="{!surveyURL}" style="border: 10; width: 100% !important; height: 410px;" ></iframe>
    				</apex:form>
    			</apex:outputPanel>
			</apex:outputPanel>
		</div>
		<!--Popup div end-->
    </body>
</apex:page>